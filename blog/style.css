#contents, #loading-overlay {
	font-family: sans-serif;
	margin: 0px;
	cursor: default;
	height: fit-content;
	min-height: 100%;
	opacity: 0;
	animation: bodyFadeIn 1s ease forwards;
	line-height: 1.6;
	color: #1e293b;
	-webkit-font-smoothing: antialiased; /* Macht Schrift auf Macs schärfer */
	text-rendering: optimizeLegibility;
	-webkit-overflow-scrolling: touch;
}

@keyframes bodyFadeIn {
	from { opacity: 0; }
	to { opacity: 1; }
}

.grid-layout { display: grid; grid-template-columns: 320px 1fr; gap: 20px; }
@media (max-width: 1000px) { .grid-layout { grid-template-columns: 1fr; } }

.layer-box { border: 2px solid #3b82f6; border-radius: 8px; padding: 12px; position: relative; }
.layer-badge { position: absolute; top: -12px; left: 10px; background: #3b82f6; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; }

.btn { cursor: pointer; padding: 10px 16px; border: none; border-radius: 8px; font-weight: 600; transition: 0.3s; margin: 5px 0; }
.btn-train { background: #2563eb; color: white; width: 100%; }
.btn-stop { background: #ef4444; color: white; width: 100%; }
.btn:hover { opacity: 0.9; transform: translateY(-1px); }

.status-console { background: #0f172a; color: #38bdf8; padding: 10px; font-family: 'Courier New', monospace; border-radius: 8px; height: 80px; overflow-y: auto; font-size: 0.8rem; margin-top: 10px; }
.heatmap-canvas { width: 100px; height: 100px; image-rendering: pixelated; border: 1px solid #94a3b8; margin-bottom: 5px; margin-right: 5px; }

.plot-container { width: 100%; min-width: 0; border-radius: 8px; position: relative; }

table { border-collapse: collapse; font-size: 11px; width: 100%; }
td, th { padding: 6px; text-align: center; }
.in-col { background: #dcfce7 !important; }
.out-col { background: #f3e8ff !important; }
.res-col { background: #fff7ed !important; font-weight: bold; }

input[type="number"] { width: 50px; padding: 4px; border: 1px solid #cbd5e0; border-radius: 4px; }
.rgb-input { border: none; width: 40px; text-align: center; color: white; text-shadow: 1px 1px 1px black; font-weight: bold; border-radius: 2px; display: block; margin: 2px auto; }
.vision-canvas { border: 2px solid #334155; width: 120px; height: 120px; image-rendering: pixelated; }

#fcnn_wrapper { width: 100%; overflow-x: auto; border-radius: 8px; margin-bottom: 15px; text-align: center; padding: 10px; }
#fcnn_canvas { display: inline-block; max-width: 100%; }
.warning-msg { color: orange; }

.auto_headline { color: red; }

.bw-cell { background: #ffffff; border: 1px solid #cbd5e0; padding: 10px; border-radius: 6px; box-shadow: MathJax-item-shadow; display: inline-block; margin: 6px; }

.token-delete {
	position: absolute;
	top: -5px;
	right: -5px;
	background: #ef4444;
	color: white;
	width: 18px;
	height: 18px;
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 12px;
	font-weight: bold;
	cursor: pointer;
	border: 2px solid white;
	opacity: 0;
	transition: opacity 0.2s;
}
.token-chip:hover .token-delete {
	opacity: 1;
}
.token-delete:hover {
	background: #b91c1c;
	transform: scale(1.1);
}

.matrix-grid { display: grid; grid-template-columns: repeat(4, 50px); gap: 5px; margin-top: 10px; background: #f8fafc; padding: 10px; border-radius: 8px; }
.matrix-input { width: 100%; text-align: center; padding: 4px; border: 1px solid #cbd5e1; border-radius: 4px; font-family: monospace; font-size: 0.8rem; }
.matrix-input:focus { border-color: #8b5cf6; outline: none; background: #f5f3ff; }

.panel { }
.math-tex { background: #f1f5f9; padding: 15px; border-radius: 8px; font-family: 'Times New Roman', serif; overflow-x: auto; border: 1px solid #e2e8f0; line-height: 2.2; }
.attn-table { border-collapse: collapse; margin-top: 10px; }
.attn-table th { font-size: 0.8rem; padding: 10px; color: #64748b; font-weight: bold; }
.attn-table td { width: 60px; height: 50px; border: 2px solid #fff; text-align: center; font-size: 0.75rem; font-weight: bold; border-radius: 4px; }
.row-label { text-align: right !important; padding-right: 15px !important; font-weight: bold; color: #64748b !important; font-size: 0.85rem; border: none !important; }
.prob-item { cursor: pointer; padding: 10px; border-radius: 8px; transition: background 0.2s; border: 1px solid transparent; }
.prob-item:hover { background: #eff6ff; border-color: #3b82f6; }
.token-table { width: 100%; border-collapse: collapse; font-size: 0.75rem; background: white; margin-top: 10px; }
.token-table th { text-align: left; padding: 8px; border-bottom: 2px solid #e2e8f0; color: #64748b; }
.token-table td { padding: 8px; border-bottom: 1px solid #f1f5f9; font-family: monospace; }
#prob-bars-container { max-height: 400px; overflow-y: auto; padding-right: 10px; }

/* Token Chip Styles from PredictionLab */
.token-chip { background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 10px; min-width: 80px; cursor: pointer; transition: 0.2s; position: relative; z-index: 10; }
.token-chip:hover { border-color: #3b82f6; background: #eff6ff; transform: translateY(-2px); }
.token-id { font-size: 0.65rem; color: #94a3b8; margin-bottom: 2px; }
.token-word { font-weight: bold; color: #1e293b; }

.plot-container {
    width: 100%;
    max-width: 600px; /* Adjust this to your preferred "reading width" */
    margin-left: auto;
    margin-right: auto;
    touch-action: pan-y; /* Allows touch devices to scroll the page over the plot */
}

#loader {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	display: flex;
	justify-content: center;
	align-items: center;
	background-color: #ffffff; /* Change to match your theme */
	z-index: 9999;
}

.spinner {
	width: 50px;
	height: 50px;
	border: 5px solid #f3f3f3;
	border-top: 5px solid #3498db; /* Spinner color */
	border-radius: 50%;
	animation: spin 1s linear infinite;
}

@keyframes spin {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

@keyframes spin {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

.sa-lab-card { background: #ffffff; border-radius: 12px; padding: 25px; }
.sa-small-desc { font-size: 0.95rem; color: #64748b; margin-bottom: 20px; }

.sa-token-block {
	padding: 15px 30px;
	background: white;
	border: 2px solid #e2e8f0;
	border-radius: 12px;
	font-family: 'Courier New', monospace;
	font-size: 1.2rem;
	font-weight: bold;
	cursor: pointer;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	position: relative;
	z-index: 10;
	box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05);
}
.sa-token-block:hover {
	border-color: #3b82f6;
	color: #2563eb;
	transform: scale(1.1);
	box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.2);
}

.sa-attn-table { border-collapse: collapse; width: 100%; border-radius: 8px; overflow: hidden; }
.sa-attn-table th { padding: 15px; background: #f8fafc; border: 1px solid #e2e8f0; color: #64748b; }
.sa-attn-table td { height: 70px; text-align: center; border: 1px solid #e2e8f0; font-size: 1.1rem; font-weight: 600; }
.sa-row-label { font-weight: bold; background: #f8fafc; color: #1e293b; width: 120px; }

.stage-card { position: relative; padding-top: 45px; min-height: 550px; display: flex; flex-direction: column; box-sizing: border-box; background: #fff; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }

.badge-label { position: absolute; top: 0; left: 20px; color: white; padding: 6px 15px; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px; font-weight: bold; font-size: 0.7rem; letter-spacing: 0.8px; }

.subtitle { font-size: 0.75rem; color: #64748b; margin-bottom: 12px; font-weight: bold; text-transform: uppercase; padding: 0 10px; line-height: 1.3; }

.output-container { flex-grow: 1; border: 1px solid #e2e8f0; border-radius: 8px; overflow-y: auto; background: #fdfdfd; margin: 0 10px 10px 10px; }

/* Fix word wrap for messy Stage 1 data */
#base-output pre { 
	margin: 0 !important; 
	white-space: pre-wrap !important; 
	word-wrap: break-word !important; 
	word-break: break-all !important; 
	font-size: 0.8rem !important;
	background: #f1f5f9 !important;
	border: none;
	line-break: anywhere;
}

.assistant-frame { padding: 20px; font-family: 'Inter', sans-serif; line-height: 1.6; font-size: 0.95rem; color: #1e293b; }
.assistant-frame pre { margin-top: 15px !important; }
.stage-footer { margin-bottom: 15px; font-size: 0.7rem; color: #94a3b8; font-style: italic; text-align: center; }

#loading-overlay {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: #fff;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	z-index: 9999;
	transition: opacity 0.5s ease;
}


#spinner {
	width: 50px;
	height: 50px;
	border: 5px solid #f3f3f3;
	border-top: 5px solid #3b82f6;
	border-radius: 50%;
	animation: spin 1s linear infinite;
}

p, .assistant-frame {
    text-align: justify; /* Verhindert Flattersatz */
    hyphens: auto;       /* Trennt Wörter automatisch, damit keine großen Lücken entstehen */
    overflow-wrap: break-word;
    word-break: break-word;
    line-break: strict;
}

/* Elemente gleiten sanft von unten nach oben ein */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.stage-card, .sa-lab-card {
    animation: fadeInUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Hover-Effekte für Buttons glätten */
.btn {
    transition: all 0.2s ease-in-out;
}

.btn:active {
    transform: scale(0.98); /* Kleiner "Druck-Effekt" beim Klicken */
}
