<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate AI Lab</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>window.MathJax = { tex: { inlineMath: [['$', '$']], displayMath: [['$$', '$$']] } };</script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.10.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="fcnn_visualization.js"></script>
    <script src="init.js"></script>
    <script src="helper.js"></script>
    <script src="visionlab.js"></script>
    <script src="functionlab.js"></script>
    <script src="train.js"></script>
    <script src="datalab.js"></script>
    <script src="embeddinglab.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="md">
### How Computers "Speak" Math: Tensors ðŸ¤–

If you want to talk to an AI about images, you can't just show it a picture. You have to turn everything into numbers. In the AI world, we call every container of numbers a **Tensor**.

Think of Tensors like a ladder of complexity:

#### 1. The Scalar (Level 0)
A **Scalar** is just one single number. 
Imagine a single lightbulb. The number tells you how bright it is: **0** is off (black), **255** is full power (white).
$$s \in \mathbb{R} \quad \text{Example:} \quad s = 255$$

#### 2. The Vector (Level 1)
A **Vector** is a list of numbers. 
To make a color, a computer needs a list of 3 numbers: one for Red, one for Green, and one for Blue. This "package" is a vector.
$$\vec{v} = \begin{pmatrix} r \\ g \\ b \end{pmatrix} \quad \text{Example:} \quad \vec{v} = \begin{pmatrix} 255 \\ 0 \\ 0 \end{pmatrix} \text{ (Pure Red!)}$$


#### 3. The Matrix (Level 2)
A **Matrix** is a grid of numbers (like a spreadsheet).
A **Black & White photo** is just a Matrix. Each spot in the grid tells the computer how bright that specific pixel is.
$$M = \begin{pmatrix} 255 & 0 \\ 0 & 255 \end{pmatrix}$$


#### 4. The Tensor (Level 3 and beyond)
When we stack many matrices together, we get a high-level **Tensor**.
A **Color Photo** is a 3D Tensor. Itâ€™s a stack of three matrices: a Red one, a Green one, and a Blue one, all sitting on top of each other.
$$\mathcal{T} \in \text{Height} \times \text{Width} \times \text{Colors}$$


> **The Secret:** In AI, we call *everything* a Tensor. A single number is just a "Level 0 Tensor." This makes it easy for the brain of the AI (the Neural Network) because it treats every piece of data with the same set of math rules!

### The Mathematical View: A $3 \times 3 \times 3$ Tensor

When you type numbers into the grid, the computer organizes them into a structured math object. Here is how your **Color Image** looks as a formal Tensor $\mathcal{T}$.

Notice how each "cell" of the grid is actually a vector (a vertical list) of three values:

$$
\mathcal{T} = \begin{pmatrix}
\begin{pmatrix} r_{1,1} \\ g_{1,1} \\ b_{1,1} \end{pmatrix} & \begin{pmatrix} r_{1,2} \\ g_{1,2} \\ b_{1,2} \end{pmatrix} & \begin{pmatrix} r_{1,3} \\ g_{1,3} \\ b_{1,3} \end{pmatrix} \\ \\
\begin{pmatrix} r_{2,1} \\ g_{2,1} \\ b_{2,1} \end{pmatrix} & \begin{pmatrix} r_{2,2} \\ g_{2,2} \\ b_{2,2} \end{pmatrix} & \begin{pmatrix} r_{2,3} \\ g_{2,3} \\ b_{2,3} \end{pmatrix} \\ \\
\begin{pmatrix} r_{3,1} \\ g_{3,1} \\ b_{3,1} \end{pmatrix} & \begin{pmatrix} r_{3,2} \\ g_{3,2} \\ b_{3,2} \end{pmatrix} & \begin{pmatrix} r_{3,3} \\ g_{3,3} \\ b_{3,3} \end{pmatrix}
\end{pmatrix}
$$

#### Decoding the Notation:
* **The Grid:** The large outer brackets $\begin{pmatrix} \dots \end{pmatrix}$ represent the **Shape** (Rows and Columns).
* **The Depth:** Each small inner bracket $\begin{pmatrix} r \\ g \\ b \end{pmatrix}$ is the **Feature Vector** for a single pixel.
* **The Coordinates:** The numbers like $_{1,2}$ mean: "Row 1, Column 2".

> **Why this matters:** When a Neural Network "looks" at your image, it performs math operations on this exact structure. It multiplies these matrices by other matrices (called Weights) to find patterns like edges, circles, or faces!
</div>

<div class="md">
### Pixel als Vektoren
In der Welt der Farben besteht jeder Bildpunkt nicht mehr aus einer, sondern aus **drei Dimensionen**. 

Man kann sich das wie einen Stapel vorstellen: Ganz oben liegt die IntensitÃ¤t fÃ¼r **Rot**, darunter **GrÃ¼n** und am Boden **Blau**. Zusammen ergeben diese drei Werte den finalen Farbvektor eines Pixels. In unserem $3 \times 3$ Beispiel siehst du links die numerischen Vektoren und rechts, wie der Computer diese "mischt".
</div>

<div class="lab-section" style="display: flex; flex-direction: column; gap: 30px;">
    
    <div style="display: flex; align-items: center; gap: 40px; background: #f8fafc; padding: 20px; border-radius: 12px; border: 1px solid #e2e8f0;">
        <div style="flex: 0 0 320px;">
            <h4>Graustufen (1 Kanal)</h4>
            <div id="bw-matrix-container"></div>
        </div>
        <div style="flex: 1; text-align: center;">
            <canvas id="bw-preview-canvas" width="3" height="3" style="width: 160px; height: 160px; image-rendering: pixelated; border: 2px solid #334155;"></canvas>
        </div>
    </div>

    <div style="display: flex; align-items: center; gap: 40px; background: #f8fafc; padding: 20px; border-radius: 12px; border: 1px solid #e2e8f0;">
        <div style="flex: 0 0 320px;">
            <h4>Farbe (3 KanÃ¤le vertikal)</h4>
            <div id="rgb-combined-container"></div>
        </div>
        <div style="flex: 1; text-align: center;">
            <canvas id="rgb-preview-canvas" width="3" height="3" style="width: 160px; height: 160px; image-rendering: pixelated; border: 2px solid #334155;"></canvas>
        </div>
    </div>
</div>

<div class="md" style="background: #ffffff; padding: 20px; border-radius: 12px; border: 1px solid #e2e8f0; margin-bottom: 10px;">
    ### Step 1: The Standard Line
    This is our starting point: $f(x) = x$. 
    If you put in 1, you get 1. Itâ€™s like a perfect $45^\circ$ hill.
</div>
<div id="plot-step-1" class="plot-container" style="height: 250px; margin-bottom: 30px;"></div>

<div class="md" style="background: #ffffff; padding: 20px; border-radius: 12px; border: 1px solid #e2e8f0; margin-bottom: 10px;">
    ### Step 2: The Flip (The Minus)
    Now we change it to $f(x) = -x$. 
    The minus sign is like a mirror. It flips the hill upside down. Positive becomes negative!
</div>
<div id="plot-step-2" class="plot-container" style="height: 250px; margin-bottom: 30px;"></div>

<div class="md" style="background: #ffffff; padding: 20px; border-radius: 12px; border: 1px solid #e2e8f0; margin-bottom: 10px;">
    ### Step 3: Making it Steep
    What if we use $f(x) = 3x$? 
    The number **3** acts like a multiplier. It makes the hill 3 times steeper. In AI, we call this number a **Weight**.
</div>
<div id="plot-step-3" class="plot-container" style="height: 250px; margin-bottom: 30px;"></div>

<div class="md" style="background: #ffffff; padding: 20px; border-radius: 12px; border: 1px solid #e2e8f0; margin-bottom: 10px;">
    ### Step 4: Adding a Partner
    Now we have two inputs: $x$ and $y$. Our rule is $f(x, y) = x + y$.
    Instead of a line, we now have a **Sheet of Paper** in the air.
</div>
<div id="plot-step-4" class="plot-container" style="height: 350px; margin-bottom: 30px;"></div>

    <h2>Vision Lab (Convolution & Matrix)</h2>
    <div style="margin-bottom: 15px; display: flex; gap: 8px; flex-wrap: wrap;">
        <button class="btn" onclick="setKernel([[0,-1,0],[-1,5,-1],[0,-1,0]])">Sharpen</button>
        <button class="btn" onclick="setKernel([[1/9,1/9,1/9],[1/9,1/9,1/9],[1/9,1/9,1/9]])">Blur</button>
        <button class="btn" onclick="setKernel([[-1,-1,-1],[-1,8,-1],[-1,-1,-1]])">Edge</button>
        <button class="btn" onclick="setKernel([[0,0,0],[0,1,0],[0,0,0]])">Identity</button>
	<button class="btn" onclick="setKernel([[-1,-2,-1],[0,0,0],[1,2,1]])">Sobel H</button>
	<button class="btn" onclick="setKernel([[-1,0,1],[-2,0,2],[-1,0,1]])">Sobel V</button>
	<button class="btn" onclick="setKernel([[-2,-1,0],[-1,1,1],[0,1,2]])">Emboss</button>
	<button class="btn" onclick="setKernel([[1/16,2/16,1/16],[2/16,4/16,2/16],[1/16,2/16,1/16]])">Gaussian</button>
    </div>
    <div style="display: flex; gap: 20px; flex-wrap: wrap; align-items: flex-start;">
        <div style="position: relative; line-height: 0; display: inline-block;">
            <b style="line-height: 1.5; display: block;">Original (Hover me!)</b>
            <canvas id="conv-src-display" class="vision-canvas" width="50" height="50" style="cursor: none; border: 1px solid #ccc;"></canvas>
            <div id="conv-focus" style="position: absolute; border: 2px solid red; pointer-events: none; display: none; box-sizing: border-box; z-index: 10;"></div>
        </div>
        <div>
            <b>Filter Kernel</b><br>
            GrÃ¶ÃŸe: <input type="number" id="k-size" value="3" min="1" max="5" step="2" onchange="initVisionLab()">
            <table id="kernel-table" style="margin-top: 10px; border-collapse: collapse;"></table>
        </div>
        <div id="conv-res-container" style="position: relative; line-height: 0; display: inline-block;">
            <b style="line-height: 1.5; display: block;">Filtered Result</b>
            <canvas id="conv-res" class="vision-canvas" width="50" height="50" style="border: 1px solid #ccc;"></canvas>
            <div id="conv-crosshair" style="position: absolute; pointer-events: none; display: none; z-index: 10;">
                <div style="position: absolute; width: 10px; height: 2px; background: red; left: -5px; top: -1px;"></div>
                <div style="position: absolute; width: 2px; height: 10px; background: red; left: -1px; top: -5px;"></div>
            </div>
        </div>
    </div>
    <div id="conv-math-step" style="margin-top: 20px; padding: 15px; background: #f8fafc; border: 1px solid #cbd5e0; border-radius: 8px; font-size: 0.85rem; overflow-x: auto; min-height: 100px;">
        Bewege die Maus Ã¼ber das Bild...
    </div>
    <img id="conv-src-hidden" src="https://picsum.photos/id/20/50/50" crossorigin="anonymous" style="display:none">
    <div id="visionlab-console" class="status-console"></div>

<div class="md">
# 2. Vision Lab
Dieses Modul zeigt, wie **Convolutional Neural Networks** Kanten erkennen.
* **Sharpen:** Hebt Kontraste hervor.
* **Blur:** GlÃ¤ttet das Bild.
> **Hinweis:** Bewege die Maus Ã¼ber das Quellbild, um die Matrix-Multiplikation live zu sehen.
	</div>

    <h2>Minimales Neuron Lab</h2>
    <div class="grid-layout">
        <div class="layers-vertical">
            <div class="layer-box" style="border-color:#10b981"><span class="layer-badge">INPUT</span>1 Node (x)</div>
            <div class="layer-box" style="border-color:#8b5cf6"><span class="layer-badge">OUTPUT</span>1 Node (y)</div>
            LR: <input type="number" id="lin-lr" value="0.1" step="0.01">
            Epochs: <input type="number" id="lin-epochs" value="100">
        </div>
        <div>
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <div id="lin-loss-chart" class="plot-container"></div>
                <div id="lin-data-chart" class="plot-container"></div>
            </div>
            <div id="lin-math-monitor" style="padding:15px; margin-top:10px;"></div>
            <button id="btn-lin-train" class="btn btn-train" onclick="toggleTraining('lin')">ðŸš€ Training Starten</button>
            <button class="btn" style="background:#64748b; color:white; width:100%" onclick="initBlock('lin')">ðŸ”„ Reset Modell</button>
            <div id="lin-console" class="status-console"></div>
        </div>
    </div>

    <h2>Deep Learning Lab</h2>
    <div style="margin-bottom: 15px; display: flex; gap: 10px;">
        <button class="btn" onclick="loadPreset('AND')">AND</button>
        <button class="btn" onclick="loadPreset('XOR')">XOR</button>
        LR: <input type="number" id="deep-lr" value="0.05" step="0.01">
        Epochs: <input type="number" id="deep-epochs" value="100">
    </div>
    <div class="grid-layout">
        <div id="deep-gui" class="layers-vertical"></div>
        <div>
            <div id="fcnn_wrapper">
                <canvas id="fcnn_canvas"></canvas>
            </div>
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                <div id="deep-loss-chart" class="plot-container"></div>
                <div id="deep-data-chart" class="plot-container"></div>
            </div>
            <div style="margin-top: 10px;">
                <b>Weights (Live):</b>
                <div id="deep-tensor-viz" style="display:flex; gap:5px; flex-wrap: wrap;"></div>
            </div>
            <div id="deep-math-monitor" style="padding:15px; margin-top:10px;"></div>
            <table id="deep-train-table">
                <thead><tr id="deep-thr"></tr></thead>
                <tbody></tbody>
            </table>
            <button class="btn" style="background:#10b981; color:white; width:100%" onclick="addRow('deep')">+ Neue Datenzeile</button>
            <div style="background: #fef3c7; padding: 15px; border-radius: 8px; margin-top:10px;">
                <div id="manual-input-area" style="display:inline-block; margin: 0 10px;"></div>
                <span>â†’ <strong id="manual-result" style="color:#b45309">0.00</strong></span>
            </div>
            <button id="btn-deep-train" class="btn btn-train" onclick="toggleTraining('deep')">ðŸš€ Training Starten</button>
            <button class="btn" style="background:#64748b; color:white; width:100%" onclick="initBlock('deep')">ðŸ”„ Reset Modell</button>
            <div id="deep-console" class="status-console"></div>
        </div>
    </div>


<div class="md" style="background: #ffffff; padding: 25px; border-radius: 12px; border: 1px solid #e2e8f0; margin-top: 20px;">
    ### ðŸ§® 3D Vector Calculator
    In this lab, words live in a 3D space with these axes:
    1. **Status** (Peasant vs. Royal)
    2. **Gender** (Male vs. Female)
    3. **Species** (Human vs. Animal)
    
    Try typing: `King - Man + Woman` or `Puppy - Dog + Cat`.
</div>

<div class="grid-layout">
    <div class="layers-vertical">
        <h4>Input Equation</h4>
        <input type="text" id="vec-input" class="bw-cell" style="width: 100%; font-size: 1.1rem; padding: 10px;" placeholder="King - Man + Woman">
        <button class="btn" style="background:#3b82f6; color:white" onclick="calcVector()">Calculate Result</button>
        
        <div id="vec-console" class="status-console" style="height: 120px;">
            Available: Man, Woman, King, Queen, Boy, Girl, Dog, Cat, Puppy, Kitten, Apple
        </div>
        
        <p style="font-size: 0.8rem; color: #64748b;">
            *ELI5: The AI finds the point in 3D space that is closest to your mathematical result.*
        </p>
    </div>
    <div id="vec-3d-plot" class="plot-container" style="height: 450px;"></div>
</div>
</body>
</html>
